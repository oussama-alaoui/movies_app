{"version":3,"names":["HeaderControl","React","forwardRef","props","ref","title","opacity","marginTop","fullScreen","locked","insets","playerConfig","nexenTheme","onBackPress","onAspectRatioPress","onMorePress","iconTagViewRef","useRef","ICON_SIZE","sizes","primaryIconSize","ICON_COLOR","colors","primaryIconColor","TITLE_TEXT_SIZE","primaryTextSize","TITLE_TEXT_COLOR","primaryTextColor","CONTAINER_VERTICAL_PADDING","top","paddingVertical","CONTAINER_HORIZONTAL_PADDING","left","right","paddingHorizontal","CONTAINER_HEIGHT","isRTL","I18nManager","useImperativeHandle","updateIconTagView","newState","current","updateState","iconTagViewTheme","useMemo","height","tagView","cornerRadius","borderWidth","iconSize","textSize","textLineHeight","iconColor","primaryColor","activeIconColor","getAlphaColor","accentColor","inactiveIconColor","textColor","secondaryTextColor","borderColor","backgroundColor","titleTextStyle","fontSize","color","fontFamily","fonts","primaryFont","styles","container","width","innerContainer","paddingTop","flex","flexDirection","justifyContent","iconButtonContainer","flexShrink","disableBack","transform","scaleX","titleText","toUpperCase","layoutMode","marginHorizontal","disableResizeMode","disableMore","memo","defaultProps","StyleSheet","create","position","minHeight","zIndex","bottom","alignItems","textContainer"],"sources":["HeaderControl.tsx"],"sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport {\n  Animated,\n  I18nManager,\n  StyleSheet,\n  Text,\n  TouchableHighlight,\n  View,\n} from 'react-native';\nimport {\n  IconAspectRatio,\n  IconChevronLeft,\n  IconMoreHorizontal,\n} from '../assets/icons';\nimport IconButton from './IconButton';\nimport GradientView from './GradientView';\nimport type { NexenTheme } from '../utils/Theme';\nimport type { EdgeInsets, NexenConfig } from './NexenPlayer';\nimport IconTagView, {\n  IconTagViewRef,\n  IconTagViewState,\n  IconTagViewTheme,\n} from './IconTagView';\nimport { getAlphaColor } from '../utils/ColorUtil';\n\nexport type HeaderControlRef = {\n  updateIconTagView: (newState: IconTagViewState) => void;\n};\n\ntype HeaderControlProps = {\n  title?: string;\n  opacity: Animated.Value;\n  marginTop: Animated.Value;\n  fullScreen: boolean;\n  locked: boolean;\n  insets?: EdgeInsets;\n  playerConfig?: NexenConfig;\n  nexenTheme?: NexenTheme;\n  onBackPress?: () => void;\n  onAspectRatioPress?: () => void;\n  onMorePress?: () => void;\n};\n\nconst HeaderControl = React.forwardRef<HeaderControlRef, HeaderControlProps>(\n  (props, ref) => {\n    const {\n      title,\n      opacity,\n      marginTop,\n      fullScreen,\n      locked,\n      insets,\n      playerConfig,\n      nexenTheme,\n      onBackPress,\n      onAspectRatioPress,\n      onMorePress,\n    } = props;\n\n    const iconTagViewRef = React.useRef<IconTagViewRef>(null);\n\n    const ICON_SIZE = nexenTheme?.sizes?.primaryIconSize;\n    const ICON_COLOR = nexenTheme?.colors?.primaryIconColor;\n    const TITLE_TEXT_SIZE = nexenTheme?.sizes?.primaryTextSize;\n    const TITLE_TEXT_COLOR = nexenTheme?.colors?.primaryTextColor;\n    const CONTAINER_VERTICAL_PADDING = fullScreen\n      ? insets?.top! > 0\n        ? insets?.top!\n        : nexenTheme?.sizes?.paddingVertical\n      : nexenTheme?.sizes?.paddingVertical;\n    const CONTAINER_HORIZONTAL_PADDING = fullScreen\n      ? (insets?.left! + insets?.right!) / 2 > 0\n        ? (insets?.left! + insets?.right!) / 2\n        : nexenTheme?.sizes?.paddingHorizontal\n      : nexenTheme?.sizes?.paddingHorizontal;\n    const CONTAINER_HEIGHT =\n      nexenTheme?.sizes?.primaryIconSize! +\n      10 * 2 +\n      16 +\n      CONTAINER_VERTICAL_PADDING!;\n    const isRTL = I18nManager.isRTL;\n\n    useImperativeHandle(ref, () => ({\n      updateIconTagView: (newState: IconTagViewState) => {\n        iconTagViewRef.current?.updateState(newState);\n      },\n    }));\n\n    const iconTagViewTheme = React.useMemo((): IconTagViewTheme => {\n      return {\n        height: nexenTheme?.tagView?.height,\n        cornerRadius: nexenTheme?.tagView?.cornerRadius,\n        borderWidth: nexenTheme?.tagView?.borderWidth,\n        iconSize: nexenTheme?.tagView?.iconSize!,\n        textSize: nexenTheme?.tagView?.textSize,\n        textLineHeight: nexenTheme?.tagView?.textLineHeight,\n        iconColor:\n          nexenTheme?.tagView?.iconColor || nexenTheme?.colors?.primaryColor,\n        activeIconColor:\n          nexenTheme?.tagView?.activeIconColor ||\n          getAlphaColor(nexenTheme?.colors?.accentColor!, 0.7),\n        inactiveIconColor:\n          nexenTheme?.tagView?.inactiveIconColor ||\n          getAlphaColor(nexenTheme?.colors?.primaryColor!, 0.5),\n        textColor:\n          nexenTheme?.tagView?.textColor ||\n          nexenTheme?.colors?.secondaryTextColor,\n        borderColor:\n          nexenTheme?.tagView?.borderColor ||\n          getAlphaColor(nexenTheme?.colors?.accentColor!, 0.7),\n        backgroundColor:\n          nexenTheme?.tagView?.backgroundColor ||\n          getAlphaColor(nexenTheme?.colors?.primaryColor!, 0.0),\n      };\n    }, [nexenTheme, fullScreen]);\n\n    const titleTextStyle = {\n      fontSize: TITLE_TEXT_SIZE,\n      color: TITLE_TEXT_COLOR,\n      fontFamily: nexenTheme?.fonts?.primaryFont,\n    };\n\n    return (\n      <Animated.View\n        style={[\n          styles.container,\n          { height: CONTAINER_HEIGHT },\n          { opacity, marginTop },\n        ]}\n      >\n        <GradientView\n          style={{\n            width: '100%',\n            height: '100%',\n          }}\n          startOpacity={0.5}\n          middleOpacity={0.2}\n          endOpacity={0.0}\n        />\n\n        <TouchableHighlight\n          style={[\n            styles.innerContainer,\n            {\n              paddingTop: CONTAINER_VERTICAL_PADDING,\n              paddingHorizontal: CONTAINER_HORIZONTAL_PADDING,\n            },\n          ]}\n        >\n          <View style={{ flex: 1 }}>\n            <View\n              style={{\n                flexDirection: 'row',\n                justifyContent: 'space-between',\n              }}\n            >\n              <View style={[styles.iconButtonContainer, { flexShrink: 1 }]}>\n                {!locked && !playerConfig?.disableBack && (\n                  <IconButton\n                    style={{ transform: [{ scaleX: isRTL ? -1 : 1 }] }}\n                    onPress={onBackPress}\n                  >\n                    <IconChevronLeft size={ICON_SIZE} color={ICON_COLOR} />\n                  </IconButton>\n                )}\n\n                <Text\n                  style={[styles.titleText, titleTextStyle]}\n                  numberOfLines={2}\n                >\n                  {title?.toUpperCase()}\n                </Text>\n              </View>\n\n              <View style={[styles.iconButtonContainer]}>\n                {!locked && playerConfig?.layoutMode === 'advanced' && (\n                  <IconTagView\n                    ref={iconTagViewRef}\n                    style={{ marginHorizontal: 4 }}\n                    theme={iconTagViewTheme}\n                  />\n                )}\n\n                {!locked &&\n                  !playerConfig?.disableResizeMode &&\n                  playerConfig?.layoutMode === 'intermediate' && (\n                    <IconButton onPress={onAspectRatioPress}>\n                      <IconAspectRatio size={ICON_SIZE} color={ICON_COLOR} />\n                    </IconButton>\n                  )}\n\n                {!locked &&\n                  !playerConfig?.disableMore &&\n                  playerConfig?.layoutMode === 'advanced' && (\n                    <IconButton onPress={onMorePress}>\n                      <IconMoreHorizontal size={ICON_SIZE} color={ICON_COLOR} />\n                    </IconButton>\n                  )}\n              </View>\n            </View>\n          </View>\n        </TouchableHighlight>\n      </Animated.View>\n    );\n  }\n);\n\nexport default React.memo(HeaderControl);\n\nHeaderControl.defaultProps = {};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    height: 56,\n    minHeight: 56,\n    zIndex: 100,\n  },\n  innerContainer: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  },\n  iconButtonContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  textContainer: {},\n  titleText: {\n    fontSize: 20,\n    paddingHorizontal: 10,\n    flexShrink: 1,\n  },\n});\n"],"mappings":"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"}