{"version":3,"names":["SeekBarTipView","React","forwardRef","props","ref","dimension","barHeight","heightPercentage","icon","parentStyle","style","theme","state","setState","useState","showTip","tipText","autoHide","timer","useRef","useImperativeHandle","updateState","newState","textStyle","color","textColor","fontSize","textSize","fontFamily","font","seekBarStyle","backgroundColor","barColor","height","seekBarUnderlayStyle","underlayColor","useEffect","current","clearTimeout","setTimeout","styles","parent","container","text","barContainer","seekBarUnderlay","seekBar","iconContainer","StyleSheet","create","position","top","bottom","justifyContent","alignItems","paddingHorizontal","paddingVertical","width","borderRadius","overflow","minWidth","fontWeight","textAlign","opacity"],"sources":["SeekBarTipView.tsx"],"sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport {\n  Animated,\n  StyleProp,\n  StyleSheet,\n  Text,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport type { VerticalSeekBarTheme } from '../utils/Theme';\n\nimport ModalView from './ModalView';\nimport { Dimension } from './NexenPlayer';\nimport type { TipViewTheme } from './TipView';\n\nexport interface SeekBarTipViewTheme\n  extends VerticalSeekBarTheme,\n    TipViewTheme {}\n\ntype SeekBarTipViewProps = {\n  dimension: Dimension;\n  barHeight: Animated.Value;\n  heightPercentage: number;\n  icon: JSX.Element;\n  theme?: SeekBarTipViewTheme;\n  parentStyle?: StyleProp<ViewStyle>;\n  style?: StyleProp<ViewStyle>;\n};\nexport type SeekBarTipViewRef = {\n  updateState: (newState: SeekBarTipViewState) => void;\n};\ntype SeekBarTipViewState = {\n  showTip?: boolean;\n  tipText?: string;\n  autoHide?: boolean;\n  icon?: JSX.Element;\n};\nconst SeekBarTipView = React.forwardRef<SeekBarTipViewRef, SeekBarTipViewProps>(\n  (props, ref) => {\n    const {\n      dimension,\n      barHeight,\n      heightPercentage,\n      icon,\n      parentStyle,\n      style,\n      theme,\n    } = props;\n\n    const [state, setState] = React.useState<SeekBarTipViewState>({\n      showTip: false,\n      tipText: '',\n      autoHide: false,\n      icon,\n    });\n\n    const timer = React.useRef<NodeJS.Timeout>();\n\n    useImperativeHandle(ref, () => ({\n      updateState: (newState: SeekBarTipViewState) => {\n        setState({ ...state, ...newState });\n      },\n    }));\n\n    const textStyle = {\n      color: theme?.textColor,\n      fontSize: theme?.textSize,\n      fontFamily: theme?.font,\n    };\n\n    const seekBarStyle = {\n      backgroundColor: theme?.barColor,\n      height: barHeight,\n    };\n\n    const seekBarUnderlayStyle = {\n      backgroundColor: theme?.underlayColor,\n      height: dimension.height * heightPercentage,\n    };\n\n    React.useEffect(() => {\n      if (state.autoHide) {\n        if (timer.current) {\n          clearTimeout(timer.current);\n        }\n        if (state.showTip) {\n          timer.current = setTimeout(() => {\n            setState({ ...state, showTip: false, tipText: '' });\n          }, 1200);\n        }\n      }\n    }, [state]);\n\n    return (\n      <>\n        {state.showTip && (\n          <View style={[styles.parent, parentStyle]}>\n            <ModalView style={[styles.container, style]}>\n              <Text style={[styles.text, textStyle]}>{state.tipText}</Text>\n              <View style={styles.barContainer}>\n                <View style={[styles.seekBarUnderlay, seekBarUnderlayStyle]}>\n                  <Animated.View style={[styles.seekBar, seekBarStyle]} />\n                </View>\n              </View>\n              <View style={styles.iconContainer}>{state.icon}</View>\n            </ModalView>\n          </View>\n        )}\n      </>\n    );\n  }\n);\n\nexport default SeekBarTipView;\n\nconst styles = StyleSheet.create({\n  parent: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n  },\n  barContainer: {\n    paddingVertical: 4,\n\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  seekBar: {\n    position: 'absolute',\n    width: 6,\n    height: 60,\n  },\n  seekBarUnderlay: {\n    width: 6,\n    height: 100,\n    borderRadius: 3,\n    overflow: 'hidden',\n    justifyContent: 'flex-end',\n  },\n  text: {\n    minWidth: 35,\n    fontSize: 12,\n    fontWeight: '600',\n    textAlign: 'center',\n    opacity: 0.8,\n  },\n  iconContainer: {\n    paddingHorizontal: 4,\n    opacity: 0.8,\n  },\n});\n"],"mappings":"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"}