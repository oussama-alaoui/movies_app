{"version":3,"names":["React","useImperativeHandle","Animated","StyleSheet","Text","View","ModalView","SeekBarTipView","forwardRef","props","ref","dimension","barHeight","heightPercentage","icon","parentStyle","style","theme","state","setState","useState","showTip","tipText","autoHide","timer","useRef","updateState","newState","textStyle","color","textColor","fontSize","textSize","fontFamily","font","seekBarStyle","backgroundColor","barColor","height","seekBarUnderlayStyle","underlayColor","useEffect","current","clearTimeout","setTimeout","styles","parent","container","text","barContainer","seekBarUnderlay","seekBar","iconContainer","create","position","top","bottom","justifyContent","alignItems","paddingHorizontal","paddingVertical","width","borderRadius","overflow","minWidth","fontWeight","textAlign","opacity"],"sources":["SeekBarTipView.tsx"],"sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport {\n  Animated,\n  StyleProp,\n  StyleSheet,\n  Text,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport type { VerticalSeekBarTheme } from '../utils/Theme';\n\nimport ModalView from './ModalView';\nimport { Dimension } from './NexenPlayer';\nimport type { TipViewTheme } from './TipView';\n\nexport interface SeekBarTipViewTheme\n  extends VerticalSeekBarTheme,\n    TipViewTheme {}\n\ntype SeekBarTipViewProps = {\n  dimension: Dimension;\n  barHeight: Animated.Value;\n  heightPercentage: number;\n  icon: JSX.Element;\n  theme?: SeekBarTipViewTheme;\n  parentStyle?: StyleProp<ViewStyle>;\n  style?: StyleProp<ViewStyle>;\n};\nexport type SeekBarTipViewRef = {\n  updateState: (newState: SeekBarTipViewState) => void;\n};\ntype SeekBarTipViewState = {\n  showTip?: boolean;\n  tipText?: string;\n  autoHide?: boolean;\n  icon?: JSX.Element;\n};\nconst SeekBarTipView = React.forwardRef<SeekBarTipViewRef, SeekBarTipViewProps>(\n  (props, ref) => {\n    const {\n      dimension,\n      barHeight,\n      heightPercentage,\n      icon,\n      parentStyle,\n      style,\n      theme,\n    } = props;\n\n    const [state, setState] = React.useState<SeekBarTipViewState>({\n      showTip: false,\n      tipText: '',\n      autoHide: false,\n      icon,\n    });\n\n    const timer = React.useRef<NodeJS.Timeout>();\n\n    useImperativeHandle(ref, () => ({\n      updateState: (newState: SeekBarTipViewState) => {\n        setState({ ...state, ...newState });\n      },\n    }));\n\n    const textStyle = {\n      color: theme?.textColor,\n      fontSize: theme?.textSize,\n      fontFamily: theme?.font,\n    };\n\n    const seekBarStyle = {\n      backgroundColor: theme?.barColor,\n      height: barHeight,\n    };\n\n    const seekBarUnderlayStyle = {\n      backgroundColor: theme?.underlayColor,\n      height: dimension.height * heightPercentage,\n    };\n\n    React.useEffect(() => {\n      if (state.autoHide) {\n        if (timer.current) {\n          clearTimeout(timer.current);\n        }\n        if (state.showTip) {\n          timer.current = setTimeout(() => {\n            setState({ ...state, showTip: false, tipText: '' });\n          }, 1200);\n        }\n      }\n    }, [state]);\n\n    return (\n      <>\n        {state.showTip && (\n          <View style={[styles.parent, parentStyle]}>\n            <ModalView style={[styles.container, style]}>\n              <Text style={[styles.text, textStyle]}>{state.tipText}</Text>\n              <View style={styles.barContainer}>\n                <View style={[styles.seekBarUnderlay, seekBarUnderlayStyle]}>\n                  <Animated.View style={[styles.seekBar, seekBarStyle]} />\n                </View>\n              </View>\n              <View style={styles.iconContainer}>{state.icon}</View>\n            </ModalView>\n          </View>\n        )}\n      </>\n    );\n  }\n);\n\nexport default SeekBarTipView;\n\nconst styles = StyleSheet.create({\n  parent: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n  },\n  barContainer: {\n    paddingVertical: 4,\n\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  seekBar: {\n    position: 'absolute',\n    width: 6,\n    height: 60,\n  },\n  seekBarUnderlay: {\n    width: 6,\n    height: 100,\n    borderRadius: 3,\n    overflow: 'hidden',\n    justifyContent: 'flex-end',\n  },\n  text: {\n    minWidth: 35,\n    fontSize: 12,\n    fontWeight: '600',\n    textAlign: 'center',\n    opacity: 0.8,\n  },\n  iconContainer: {\n    paddingHorizontal: 4,\n    opacity: 0.8,\n  },\n});\n"],"mappings":"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"}