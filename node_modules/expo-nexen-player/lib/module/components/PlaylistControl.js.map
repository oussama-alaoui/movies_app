{"version":3,"names":["React","FlatList","Image","StyleSheet","TouchableOpacity","View","GradientView","IconPlayCircle","ModalView","withAnimation","PlaylistControl","props","style","playlist","playlistIndex","fullScreen","insets","onPlaylistItemPress","playlistRef","useRef","CONTAINER_HEIGHT","flatten","height","CONTAINER_PADDING","ITEM_HEIGHT","Number","bottom","ITEM_WIDTH","ICON_SIZE","SEPERATOR_WIDTH","TOTAL_WIDTH","CONTAINER_HORIZONTAL_PADDING","left","right","renderPlayListItem","item","index","itemStyle","width","styles","itemContainer","image","uri","itemSource","poster","icon","containerStyle","paddingHorizontal","paddingVertical","container","innerContainer","list","_","toString","length","offset","create","overflow","zIndex","position","top","flex","backgroundColor","justifyContent","alignItems","resizeMode"],"sources":["PlaylistControl.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  FlatList,\n  Image,\n  ListRenderItemInfo,\n  StyleProp,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport GradientView from './GradientView';\nimport { NexenTheme } from '../utils/Theme';\nimport { EdgeInsets, PlayListItem } from './NexenPlayer';\nimport { IconPlayCircle } from '../assets/icons';\nimport ModalView from './ModalView';\nimport { withAnimation } from '../hoc/withAnimation';\n\ntype PlaylistControlProps = {\n  fullScreen: boolean;\n  playlist?: PlayListItem[];\n  playlistIndex?: number;\n  nexenTheme?: NexenTheme;\n  insets?: EdgeInsets;\n  style?: StyleProp<ViewStyle>;\n  onPlaylistItemPress?: (index: number) => void;\n};\n\nconst PlaylistControl = (props: PlaylistControlProps) => {\n  const {\n    style,\n    playlist,\n    playlistIndex,\n    fullScreen,\n    insets,\n    onPlaylistItemPress,\n  } = props;\n\n  const playlistRef = React.useRef<FlatList>(null);\n\n  const CONTAINER_HEIGHT = StyleSheet.flatten(style).height || 120;\n  const CONTAINER_PADDING = 16;\n  const ITEM_HEIGHT = fullScreen\n    ? Number(CONTAINER_HEIGHT) - CONTAINER_PADDING - insets?.bottom!\n    : Number(CONTAINER_HEIGHT) - CONTAINER_PADDING * 2;\n  const ITEM_WIDTH = ITEM_HEIGHT * (16 / 9);\n  const ICON_SIZE = ITEM_HEIGHT * 0.6;\n\n  const SEPERATOR_WIDTH = 5;\n  const TOTAL_WIDTH = ITEM_WIDTH + SEPERATOR_WIDTH;\n\n  const CONTAINER_HORIZONTAL_PADDING = fullScreen\n    ? (insets?.left! + insets?.right!) / 2 > 0\n      ? (insets?.left! + insets?.right!) / 2\n      : 8\n    : 8;\n\n  const renderPlayListItem = ({\n    item,\n    index,\n  }: ListRenderItemInfo<PlayListItem>) => {\n    const itemStyle = {\n      width: ITEM_WIDTH,\n      height: ITEM_HEIGHT,\n    };\n\n    return (\n      <TouchableOpacity\n        style={[styles.itemContainer, itemStyle]}\n        activeOpacity={0.6}\n        onPress={() => {\n          onPlaylistItemPress?.(index);\n        }}\n      >\n        <Image\n          style={[styles.image, itemStyle]}\n          source={{ uri: item.itemSource.poster }}\n        />\n        {index !== playlistIndex && (\n          <IconPlayCircle\n            style={styles.icon}\n            size={ICON_SIZE}\n            color={'#fafafa'}\n          />\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  const containerStyle = {\n    left: CONTAINER_HORIZONTAL_PADDING,\n    right: CONTAINER_HORIZONTAL_PADDING,\n    bottom: 0,\n    paddingHorizontal: 0,\n    paddingVertical: 0,\n  };\n\n  return (\n    <ModalView style={[styles.container, style, containerStyle]}>\n      <GradientView\n        style={{\n          height: '100%',\n          width: '100%',\n        }}\n        startOpacity={0.0}\n        middleOpacity={0.2}\n        endOpacity={0.5}\n      />\n      <View style={[styles.innerContainer]}>\n        <FlatList\n          ref={playlistRef}\n          style={styles.list}\n          keyExtractor={(_, index) => index.toString()}\n          ItemSeparatorComponent={() => (\n            <View style={{ width: SEPERATOR_WIDTH }} />\n          )}\n          data={playlist}\n          renderItem={renderPlayListItem}\n          initialScrollIndex={playlistIndex}\n          getItemLayout={(_, index) => ({\n            length: TOTAL_WIDTH,\n            offset: TOTAL_WIDTH * index,\n            index,\n          })}\n          horizontal\n          bounces={false}\n        />\n      </View>\n    </ModalView>\n  );\n};\n\nexport default withAnimation(PlaylistControl);\n\nconst styles = StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n    zIndex: 110,\n  },\n  innerContainer: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    paddingHorizontal: 16,\n    paddingVertical: 16,\n  },\n  list: {\n    flex: 1,\n  },\n  itemContainer: {\n    backgroundColor: '#212121',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  image: {\n    resizeMode: 'cover',\n  },\n  icon: {\n    position: 'absolute',\n  },\n});\n"],"mappings":"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"}