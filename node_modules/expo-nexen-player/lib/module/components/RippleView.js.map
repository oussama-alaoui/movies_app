{"version":3,"names":["React","useImperativeHandle","Animated","Easing","StyleSheet","View","RIPPLE_ANIM_DURATION","BLINK_ANIM_DURATION","RippleView","forwardRef","props","ref","style","containerStyle","rippleStyle","rippleSize","children","tipText","setTipText","useState","rippleOpacity","useRef","Value","current","rippleScale","blinkViewOpacity","onPress","newTipText","callback","startRippleAnimation","startBlinkAnimation","parallel","timing","toValue","duration","useNativeDriver","start","finished","setValue","animSequence","sequence","easing","linear","animation","loop","iterations","styles","container","ripple","width","height","borderRadius","opacity","transform","scale","innerContainer","flex","flashContainer","text","create","justifyContent","alignItems","position","backgroundColor","fontSize","fontWeight","color","margin","textAlign"],"sources":["RippleView.tsx"],"sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport {\n  Animated,\n  Easing,\n  StyleProp,\n  StyleSheet,\n  View,\n  ViewStyle,\n} from 'react-native';\n\nconst RIPPLE_ANIM_DURATION = 500;\nconst BLINK_ANIM_DURATION = 200;\n\nexport interface RippleViewTheme {}\n\ntype RippleViewProps = {\n  children: JSX.Element;\n  rippleSize?: number;\n  style?: StyleProp<ViewStyle>;\n  containerStyle?: StyleProp<ViewStyle>;\n  rippleStyle?: StyleProp<ViewStyle>;\n};\n\nexport type RippleEvent = { x: number; y: number };\nexport type RippleViewRef = {\n  onPress: (newTipText?: string, callback?: () => void) => void;\n};\n\nconst RippleView = React.forwardRef<RippleViewRef, RippleViewProps>(\n  (props, ref) => {\n    const { style, containerStyle, rippleStyle, rippleSize, children } = props;\n    const [tipText, setTipText] = React.useState('');\n\n    const rippleOpacity = React.useRef(new Animated.Value(0)).current;\n    const rippleScale = React.useRef(new Animated.Value(0)).current;\n    const blinkViewOpacity = React.useRef(new Animated.Value(0)).current;\n\n    useImperativeHandle(ref, () => ({\n      onPress: (newTipText?: string, callback?: () => void) => {\n        startRippleAnimation(() => {\n          callback?.();\n        });\n        startBlinkAnimation();\n        if (newTipText) {\n          setTipText(newTipText);\n        }\n      },\n    }));\n    const startRippleAnimation = (callback?: () => void) => {\n      Animated.parallel([\n        Animated.timing(rippleOpacity, {\n          toValue: 0.7,\n          duration: RIPPLE_ANIM_DURATION,\n          useNativeDriver: false,\n        }),\n        Animated.timing(rippleScale, {\n          toValue: 1.2,\n          duration: RIPPLE_ANIM_DURATION,\n          useNativeDriver: false,\n        }),\n      ]).start(({ finished }) => {\n        if (finished) {\n          Animated.timing(rippleOpacity, {\n            toValue: 0,\n            duration: 300,\n            useNativeDriver: false,\n          }).start(() => {\n            rippleScale.setValue(0);\n            callback?.();\n          });\n        }\n      });\n    };\n\n    const startBlinkAnimation = (callback?: () => void) => {\n      const animSequence = Animated.sequence([\n        Animated.timing(blinkViewOpacity, {\n          toValue: 0.8,\n          duration: BLINK_ANIM_DURATION,\n          easing: Easing.linear,\n          useNativeDriver: true,\n        }),\n        Animated.timing(blinkViewOpacity, {\n          toValue: 0,\n          duration: BLINK_ANIM_DURATION,\n          easing: Easing.linear,\n          useNativeDriver: true,\n        }),\n      ]);\n      let animation = Animated.loop(animSequence, { iterations: 2 });\n      animation.start(() => {\n        callback?.();\n      });\n    };\n\n    return (\n      <View style={[styles.container, style]} pointerEvents=\"none\">\n        <Animated.View\n          style={[\n            styles.ripple,\n            {\n              width: rippleSize! * 2,\n              height: rippleSize! * 2,\n              borderRadius: rippleSize!,\n            },\n            rippleStyle,\n            {\n              opacity: rippleOpacity,\n              transform: [{ scale: rippleScale }],\n            },\n          ]}\n        />\n        <View style={[styles.innerContainer, containerStyle]}>\n          <View style={{ flex: 0.45 }} />\n          <View style={{ flex: 0.55 }}>\n            <Animated.View\n              style={[styles.flashContainer, { opacity: blinkViewOpacity }]}\n            >\n              {children}\n            </Animated.View>\n            <Animated.Text style={[styles.text, { opacity: blinkViewOpacity }]}>\n              {tipText}\n            </Animated.Text>\n          </View>\n        </View>\n      </View>\n    );\n  }\n);\n\nexport default RippleView;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  innerContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  ripple: {\n    position: 'absolute',\n    backgroundColor: 'rgba(250,250,250,0.3)',\n  },\n  flashContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  text: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#fafafa',\n    margin: 6,\n    textAlign: 'center',\n  },\n});\n"],"mappings":"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"}