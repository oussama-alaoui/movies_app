{"version":3,"names":["React","useImperativeHandle","StyleSheet","Text","View","IconInfo","ModalView","TipView","forwardRef","props","ref","style","theme","state","setState","useState","showTip","tipText","autoHide","withIcon","icon","timeoutRef","useRef","updateState","newState","textStyle","color","textColor","fontSize","textSize","fontFamily","font","useEffect","current","clearTimeout","setTimeout","styles","container","iconContainer","text","create","flexDirection","marginRight"],"sources":["TipView.tsx"],"sourcesContent":["import React, {useImperativeHandle} from 'react';\nimport {ColorValue, StyleProp, StyleSheet, Text, View, ViewStyle} from 'react-native';\nimport {IconInfo} from '../assets/icons';\nimport ModalView from './ModalView';\n\nexport interface TipViewTheme {\n  iconSize?: number;\n  iconColor?: ColorValue;\n  textSize?: number;\n  textColor?: ColorValue;\n  font?: string;\n}\n\ntype TipViewProps = {\n  theme?: TipViewTheme;\n  style?: StyleProp<ViewStyle>;\n};\n\ntype TipViewState = {\n  showTip?: boolean;\n  tipText?: string;\n  autoHide?: boolean;\n  withIcon?: boolean;\n  icon?: JSX.Element;\n};\nexport type TipViewRef = {\n  updateState: (newState: TipViewState) => void;\n};\n\nconst TipView = React.forwardRef<TipViewRef, TipViewProps>((props, ref) => {\n  const {style, theme} = props;\n\n  const [state, setState] = React.useState<TipViewState>({\n    showTip: false,\n    tipText: 'Tip Text',\n    autoHide: true,\n    withIcon: false,\n    icon: <IconInfo size={20} color={'#fafafa'}/>,\n  });\n  const timeoutRef = React.useRef<NodeJS.Timeout | null>();\n\n  useImperativeHandle(ref, () => ({\n    updateState: (newState: TipViewState) => {\n      setState({...state, ...newState});\n    },\n  }));\n\n  const textStyle = {\n    color: theme?.textColor,\n    fontSize: theme?.textSize,\n    fontFamily: theme?.font,\n  }\n\n  React.useEffect(() => {\n    if (state.autoHide) {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n      if (state.showTip) {\n        timeoutRef.current = setTimeout(() => {\n          setState({...state, showTip: false, withIcon: false});\n        }, 1200);\n      }\n    }\n  }, [state]);\n\n  React.useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    }\n  }, [])\n\n  return (\n    <>\n      {state.showTip && (\n        <ModalView style={[styles.container, style]}>\n          {state.withIcon && (\n            <View style={styles.iconContainer}>{state.icon}</View>\n          )}\n          <Text style={[styles.text, textStyle]}>\n            {state.tipText}\n          </Text>\n        </ModalView>\n      )}\n    </>\n  );\n});\n\nexport default TipView;\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n  },\n  iconContainer: {\n    marginRight: 8,\n  },\n  text: {\n    fontSize: 20,\n  },\n});\n"],"mappings":"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"}